<?xml version="1.0" ?>
<mujoco model="vbot navigation - full course (section011+012+013)">
  <compiler angle="radian" meshdir="meshes/" autolimits="true"/>
  
  <!-- 引入vbot机器人 -->
  <include file="vbot.xml" />
  
  <!-- 覆盖整个三阶段场景的范围 -->
  <statistic center="0 10 0.1" extent="50" meansize="0.04" />

  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0" />
    <rgba haze="0.15 0.25 0.35 1" />
    <global azimuth="120" elevation="-20" />
    <map force="0.01" />
    <scale forcewidth="0.3" contactwidth="0.5" contactheight="0.2" />
    <quality shadowsize="8192" />
  </visual>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="3072"/>
    
    <!-- 加载三个阶段的模型 -->
    <!-- Section011 (第一阶段) -->
    <model name="section011V" file="0202_V_section01.xml"/>  <!-- 视觉模型 -->
    <model name="section011C" file="0126_C_section01.xml"/>  <!-- 碰撞模型 -->
    
    <!-- Section012 (第二阶段) -->
    <model name="section012V" file="0202_V_section02.xml"/>  <!-- 视觉模型 -->
    <model name="section012C" file="0131_C_section02_hotfix1.xml"/>  <!-- 碰撞模型 -->
    
    <!-- Section013 (第三阶段) -->
    <model name="section013V" file="0202_V_section03.xml"/>  <!-- 视觉模型 -->
    <model name="section013C" file="0126_C_section03.xml"/>  <!-- 碰撞模型 -->
  </asset>

  <worldbody>
    <light pos="0 10 10" dir="0 0 -1" directional="true" />
    
    <!-- Section011 (第一阶段) - Y: 0到~10米 -->
    <attach model="section011V" prefix="S011V_"/>
    <attach model="section011C" prefix="S011C_"/>
    
    <!-- Section012 (第二阶段) - Y: ~10到~20米 -->
    <attach model="section012V" prefix="S012V_"/>
    <attach model="section012C" prefix="S012C_"/>
    
    <!-- Section013 (第三阶段) - Y: ~20到~30米 -->
    <attach model="section013V" prefix="S013V_"/>
    <attach model="section013C" prefix="S013C_"/>
  </worldbody>

  <sensor>
    <!-- Section011碰撞检测 -->
    <contact name="S011_FR_foot_contact" subtree1="FR_foot" subtree2="S011C_ground_root" data="normal" num="1" />
    <contact name="S011_FL_foot_contact" subtree1="FL_foot" subtree2="S011C_ground_root" data="normal" num="1" />
    <contact name="S011_RR_foot_contact" subtree1="RR_foot" subtree2="S011C_ground_root" data="normal" num="1" />
    <contact name="S011_RL_foot_contact" subtree1="RL_foot" subtree2="S011C_ground_root" data="normal" num="1" />
    <contact name="S011_base_contact" subtree1="base" subtree2="S011C_ground_root" data="normal" num="1" />
    
    <!-- Section012碰撞检测 -->
    <contact name="S012_FR_foot_contact" subtree1="FR_foot" subtree2="S012C_ground_root" data="normal" num="1" />
    <contact name="S012_FL_foot_contact" subtree1="FL_foot" subtree2="S012C_ground_root" data="normal" num="1" />
    <contact name="S012_RR_foot_contact" subtree1="RR_foot" subtree2="S012C_ground_root" data="normal" num="1" />
    <contact name="S012_RL_foot_contact" subtree1="RL_foot" subtree2="S012C_ground_root" data="normal" num="1" />
    <contact name="S012_base_contact" subtree1="base" subtree2="S012C_ground_root" data="normal" num="1" />
    
    <!-- Section013碰撞检测 -->
    <contact name="S013_FR_foot_contact" subtree1="FR_foot" subtree2="S013C_ground_root" data="normal" num="1" />
    <contact name="S013_FL_foot_contact" subtree1="FL_foot" subtree2="S013C_ground_root" data="normal" num="1" />
    <contact name="S013_RR_foot_contact" subtree1="RR_foot" subtree2="S013C_ground_root" data="normal" num="1" />
    <contact name="S013_RL_foot_contact" subtree1="RL_foot" subtree2="S013C_ground_root" data="normal" num="1" />
    <contact name="S013_base_contact" subtree1="base" subtree2="S013C_ground_root" data="normal" num="1" />
    
    <!-- 通用base_contact传感器 - 用于任何阶段的碰撞检测 -->
    <contact name="base_contact" subtree1="base" subtree2="S011C_ground_root" data="normal" num="1" />
  </sensor>

</mujoco>
